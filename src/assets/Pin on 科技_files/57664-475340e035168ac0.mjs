(self.modernJsonp=self.modernJsonp||[]).push([["57664"],{28054(e,a,t){t.d(a,{aj:()=>L,Ay:()=>C,ss:()=>N,Ic:()=>y});var l=t(950794);let n=Object.freeze({DAILY:1,WEEKLY:2,BIWEEKLY:3,MONTHLY:4}),o=Object.freeze({ONE_WEEK:"7D",ONE_MONTH:"30D",THREE_MONTH:"90D",SIX_MONTH:"180D",ONE_YEAR:"365D",TWO_YEAR:"730D"}),i=new l.rk(10),s=new l.K5([i]),r=new l.K5([s]),_=new l.K5([r]),d=new l.K5([_]),u=Object.freeze({AGE_18_24:"18-24",AGE_21_24:"21-24",AGE_18_20:"18-20",AGE_25_34:"25-34",AGE_35_44:"35-44",AGE_45_49:"45-49",AGE_50_54:"50-54",AGE_55_64:"55-64",AGE_65_PLUS:"65+"}),p={[u.AGE_18_20]:2,[u.AGE_21_24]:3,[u.AGE_25_34]:4,[u.AGE_35_44]:5,[u.AGE_45_49]:6,[u.AGE_50_54]:7,[u.AGE_55_64]:8,[u.AGE_65_PLUS]:9,AGE_UNSUPORTED:10},c=o.ONE_MONTH,E={[o.ONE_WEEK]:n.DAILY,[o.ONE_MONTH]:n.DAILY,[o.THREE_MONTH]:n.WEEKLY,[o.SIX_MONTH]:n.WEEKLY,[o.ONE_YEAR]:n.WEEKLY},S=Object.freeze({DETAIL:"/detail/",HOME:"/"}),g={[o.ONE_WEEK]:1,[o.ONE_MONTH]:2,[o.THREE_MONTH]:3,[o.SIX_MONTH]:4,[o.ONE_YEAR]:5},m={[o.ONE_WEEK]:7,[o.ONE_MONTH]:30,[o.THREE_MONTH]:90,[o.SIX_MONTH]:180,[o.ONE_YEAR]:365,[o.TWO_YEAR]:730},T={MALE:"male",FEMALE:"female",UNSPECIFIED:"unspecified"},b={...T,UNSPECIFIED:"unknown"},O={[T.MALE]:0,[T.FEMALE]:1,[T.UNSPECIFIED]:2},h={TOP_TRENDS_INTERNAL:"1",GROWING_TRENDS_INTERNAL:"2",BREAKOUT_TRENDS_INTERNAL:"3",SEASONAL_TRENDS_INTERNAL:"4",TOP_MONTHLY_TRENDS:"1",TOP_YEARLY_TRENDS:"2",GROWING_TRENDS:"3",SEASONAL_TRENDS:"4"},I=Object.freeze({[h.TOP_TRENDS_INTERNAL]:"Top Trends",[h.GROWING_TRENDS_INTERNAL]:"Growing Trends",[h.BREAKOUT_TRENDS_INTERNAL]:"Breakout Trends"}),v={[h.TOP_MONTHLY_TRENDS]:"Top Monthly Trends",[h.TOP_YEARLY_TRENDS]:"Top Yearly Trends",[h.GROWING_TRENDS]:"Growing Trends",[h.SEASONAL_TRENDS]:"Seasonal Trends"};Object.freeze({L1:1,L2:2,L3:3}),Object.freeze({ONE_MONTH:2,THREE_MONTHS:3,SIX_MONTHS:4,ONE_YEAR:5}),Object.freeze({HIGH_VOLUME:1,GROWTH:2});let w=Object.freeze({HIGH_VOLUME:"HIGH_VOLUME",GROWTH:"GROWTH"});Object.freeze({NC_ENGAGEMENT_PLUS_ACTIVE_FOLLOWERS_90d:1});let y=`https://trends.pinterest.com${S.DETAIL}`,A=Object.freeze([o.ONE_MONTH,o.ONE_YEAR,o.THREE_MONTH,o.ONE_MONTH]),N="https://i.pinimg.com/originals/3d/2f/41/3d2f41008f24a1839f25021cf78e908d.png",L=444,C={PAGES:S,TOAST_DURATION:3e3,Z_INDEX_TRENDS_HEADER:i,Z_INDEX_TRENDS_FEEDBACK_BUTTON:s,Z_INDEX_TRENDS_AUTOCOMPLETE_BOX:r,Z_INDEX_TRENDS_SEARCH_FORM:_,Z_INDEX_TRENDS_TOOLTIP:d,DEPRECATED_GESTALT_COLORS_HEX_VALUES:{red:"var(--base-color-red-300)",white:"#FFF",lightGray:"#EFEFEF",gray:"#8E8E8E",darkGray:"#333",green:"#0FA573",pine:"#0A6955",olive:"#364A4C",blue:"#4A90E2",navy:"#004B91",midnight:"#133A5E",purple:"#B469EB",orchid:"#8046A5",eggplant:"#5B2677",maroon:"#6E0F3C",watermelon:"#F13535",orange:"#E3780C"},MOBILE_MAX_WIDTH:576,FEEDBACK_CHAR_LIMIT:3e3,DEFAULT_CARD_WIDTH:357,DEFAULT_CARD_HEIGHT_RATIO:.65,FIVE_CARD_WIDTH:204,FIVE_CARD_HEIGHT_RATIO:.74,FIVE_LEFT_IMAGE_WIDTH_RATIO:.65,SMALL_CARD_WIDTH:220,DEFAULT_DAYS:"360",CARD_PADDING:10,FIVE_CARD_PADDING:24,PAGE_PADDING:160,MOBILE_HEIGHT:280,DESKTOP_HEIGHT:340,DESKTOP_PREDICTION_CHART_HEIGHT:480,DESKTOP_MOMENT_PREDICTION_CHART_HEIGHT:440,MOBILE_WIDTH:360,DESKTOP_WIDTH:900,CARD_WIDTH_PLUS_PADDING:377,AGE_21_PLUS:"21+",DEFAULT_COUNTRY:"US",TOP_TRENDS_PARAMETER:"topTrendsParameter",DEFAULT_DESIRED_CARD_PER_ROW:3,EXTERNAL_DESIRED_CARD_PER_ROW:5,DATE_FILTER_FORMAT:"MM/DD/YY",ALL:"all",TRENDS_CAMPAIGN_PLANNER:"TRENDS_CAMPAIGN_PLANNER",TRENDS:"TRENDS",PICK:"pick",PLUS_ICON:"+",MINUS_ICON:"-",FILTERABLE_TABLE_ROWS_PER_PAGE:Object.freeze({FIFTY:"50",ONE_HUNDRED:"100",TWO_HUNDRED_FIFTY:"250"}),DEBOUNCE_MILISECONDS:300,FILTER_SECTION:{FILTER_BAR_WIDTH:270,FILTER_BAR_MIN_HEIGHT:432,DATE_RANGE_WIDTH:178,DATE_PICKER_WIDTH:166,EXTERNAL_FILTER_BAR_WIDTH:225},DEFAULT_NUM_TOP_TRENDS:250,DEFAULT_EXTERNAL_NUM_TOP_TRENDS:50,GENDER:T,GENDER_MP:b,GENDER_TO_THRIFT_CONST:O,AGE_BUCKETS:u,AGE_TO_THRIFT_CONST:p,THRIFT_TO_AGE_CONST:{2:"18-20",3:"21-24",4:"25-34",5:"35-44",6:"45-49",7:"50-54",8:"55-64",9:"65+"},THRIFT_TO_GENDER_CONST:{0:"male",1:"female",2:"unknown"},LOOK_BACK_WINDOW:o,LOOK_BACK_WINDOW_DEFAULT:c,LOOK_BACK_WINDOW_TO_THRIFT_CONST:g,LOOK_BACK_WINDOW_TO_AGGREGATION_CONST:E,LOOK_BACK_WINDOW_TO_DAYS:m,TRENDS_TYPES:h,TRENDS_INTERNAL_TYPES_VALUES_TO_LABELS:I,TRENDS_EXTERNAL_TYPES_VALUES_TO_LABELS:v,URL_PARAM_BOOLEAN_VALUES:{TRUE:"true",FALSE:"false"},SEASONALITY_SCORE_THRESHOLD:.825,SEASONALITY_SCORE_OLD_THRESHOLD:.75,SEASONALITY_SCORE_THRESHOLD_CUTOVER_DATE:"2024-04-08",SORT_ORDER:Object.freeze({DESC:"desc",ASC:"asc"}),FILTER_TYPES:Object.freeze({OPPORTUNITY:"OPPORTUNITY",CAMPAIGN:"CAMPAIGN"}),SORT_BY:Object.freeze({TREND_RANK:"TREND_RANK",TOTAL_SEARCH:"TOTAL_SEARCH",WEEKLY_CHANGE:"WEEKLY_CHANGE",MONTHLY_CHANGE:"MONTHLY_CHANGE",YEARLY_CHANGE:"YEARLY_CHANGE"}),URL_JOIN_SIGN:"|",CONCATENATED_STRING_SEPARATOR:", ",CSV_SEPARATOR:",",TERM_ALL:"all",DEBOUNCE_AUDIENCE_SIZE:1e3,MAX_ADD_TERMS:50,L1_SECTIONS:{ALL:{value:"all",label:"All categories"},FOOD_AND_DRINK:{value:"foodanddrink",label:"Food and drinks",id:"918530398158"},BEAUTY:{value:"beauty",label:"Beauty",id:"935541271955"},HOME_DECOR:{value:"homedecor",label:"Home decor",id:"935249274030"},FASHION:{value:"fashion",label:"Fashion",id:"948967005229"},TRAVEL:{value:"travel",label:"Travel",id:"908182459161"},ART:{value:"art",label:"Art",id:"961238559656"},QUOTES:{value:"quotes",label:"Quotes",id:"948192800438"},ENTERTAINMENT:{value:"entertainment",label:"Entertainment",id:"953061268473"},DIY_AND_CRAFTS:{value:"diyandcrafts",label:"DIY and crafts",id:"934876475639"},HEALTH:{value:"health",label:"Health",id:"898620064290"},WEDDINGS:{value:"weddings",label:"Wedding",id:"903260720461"},EVENT_PLANNING:{value:"eventplanning",label:"Event planning",id:"941870572865"},LAWN_AND_GARDEN:{value:"lawnandgarden",label:"Gardening",id:"909983286710"},ANIMALS:{value:"animals",label:"Animals",id:"925056443165"},PARENTING:{value:"parenting",label:"Parenting",id:"920236059316"},EDUCATION:{value:"education",label:"Education",id:"922134410098"},VEHICLES:{value:"vehicles",label:"Vehicles",id:"918093243960"},DESIGN:{value:"design",label:"Design",id:"902065567321"},SPORTS:{value:"sports",label:"Sport",id:"919812032692"},ELECTRONICS:{value:"electronics",label:"Electronics",id:"960887632144"},FINANCE:{value:"finance",label:"Finance",id:"913207199297"},ARCHITECTURE:{value:"architecture",label:"Architecture",id:"918105274631"}},BASE_BANNER_HEIGHT:627,COUNT_TYPES:{COUNT:"count",NORMALIZED_COUNT:"normalizedCount"},EXTERNAL_LOOKBACK_WINDOW_MAPPED_TREND_TYPES:A,FEEDBACK_SLACK_CHANNEL:"slack://channel?team=T024LJUGB&id=CKBF9A6EL",MAX_TERMS:4,COUNTRY_FULL_NAMES:{US:"the United States",CA:"Canada",GB:"the United Kingdom",IN:"India",AU:"Australia"},CONCATENATED_INTERESTS_PARAM_KEY:"concatenatedInterests",FILTER_INTEREST_IDS_PARAM_KEY:"filterInterestIds",FILTER_AGE_IDS_PARAM_KEY:"filterAgeIds",FILTER_GENDERS_PARAM_KEY:"filterGenders",EXPORT_TYPES:{DISCOVER:"discover",DETAILS:"details",CAMPAIGN:"campaignPlan"},EXPORT_NA:"N/A",EXPORT_ALL:"All",EXPORT_NONE:"None",ENGLISH_LANGUAGE_CODE:"en",KEYWORD_SPLIT_CHARACTER:`
`,COUNTRY_PREFIX_POSTAL_CODE_SEPARATOR:":",EXPORT_MESSAGE_HEADER:"Export in progress",DEPRECATED_COLOR_VALUES:["blue","green","purple","orange","red","maroon","orchid","navy","pine","watermelon"],EXPORT_MESSAGE:"This should only take a few seconds. Don't go back.",POPULAR_PINS_MAXIMUM_IMAGES:9,MAXIMUM_TERM_IMAGES_BULK_SIZE:250,TERM_IMAGE_MEMCACHE_KEY_PREFIX:"timg:",EXTRA_TERM_IMAGES:80,DESIRED_PIN_IMAGE_SIZE:"236x",PIN_IMAGE_URL_PREFIX:"https://i.pinimg.com/",PIN_IMAGE_URL_SUFFIX:".jpg",PIN_IMAGE_DEFAULT_CACHE_TIME_S:86400,DOUBLE_ROW_CARD_WIDTH:170,TOP_TRENDS_CAROUSEL_TERMS:9,TRENDS_FOR_PINS_MODULE_BREAK_WIDTH:1380,TRENDS_SEARCHBAR_HEIGHT:193,TOP_TRENDS_CAROUSEL_EXTENDED_TERMS:30,TOP_TRENDS_UNAUTH_CAROUSEL_TERMS:25,TOP_TRENDS_DOUBLE_ROW_MAX_TERMS:6,DETAILS_PAGE_SEARCH_OVERTIME_SUBTITLE_WIDTH:750,PT_IMAGE_SIZE:"236x",FILTERED_TABLE_IMAGE_SIZE:"30x30",TOP_TREND_CAROUSEL_IMAGE_SIZE:"236x",MOMENT_IMAGE_CARD_SIZE:"70x70",PERSONALIZED_TREND_TYPES:w,PREDICTION_SUPPORTED_COUNTRIES:["US"],MOMENT_PREDICTION_LOOKBACK_DAYS:730,MILLISECONDS_PER_DAY:864e5}},968918(e,a,t){t.d(a,{YQ:()=>n});var l=t(859471);t(312716),(0,l.createContext)({isUpsellUnauthModalOpen:!1,openUpsellUnauthModal:()=>{},closeUpsellUnauthModal:()=>{}}),Object.freeze({IS_SEASONAL:"seasonal",TERMS:"terms",COUNTRY:"country",EDITORIAL_INDEX:"editorial",SHOULD_MOCK:"shouldMock",EMPTY_HERO_BANNER_MOCK:"emptyHeroBanner",TRENDS_PRESET:"trendsPreset",ADVERTISER_ID:"advertiserId",END_DATE:"endDate",SELECTED_END_DATE:"selectedEndDate",AGE_BUCKET:"ageBucket",GENDER:"gender",LOOK_BACK_WINDOW:"lookbackWindow",COUNTS_TYPE:"countsType",DATE_RANGE:"dateRange",AGGREGATION_LEVEL:"aggregationLevel",SORT_BY:"sortBy",SORT_ORDER:"sortOrder",L1_INTEREST_IDS:"l1InterestIds",L2_INTEREST_IDS:"l2InterestIds",L3_INTEREST_IDS:"l3InterestIds",KEYWORDS_TO_EXCLUDE:"keywordsToExclude",KEYWORDS_TO_INCLUDE:"keywordsToInclude",RANKING_METHOD:"rankingMethod",AGE_DETAILS_PAGE:"ageDetailsPage",GENDER_DETAILS_PAGE:"genderDetailsPage",TOP_TRENDS:"topTrends",MOMENTS:"moments",HAS_PREDICTIONS:"hasPredictions",SHOW_PREDICTION:"showPrediction",URL_PARAM_UTM_VALUES:Object.freeze({UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_CONTENT:"utm_content",UTM_TERM:"utm_term",UTM_CREATIVE:"utm_creative"}),EVENT:"event",GRAPH_EVENT:"graphEvent",PRODUCT_CATEGORIES:"product_categories",PAGE_NUMBER:"page",TOPIC_INTEREST_IDS:"topicInterestIds",PARENT_PRODUCT_CATEGORY:"parentProductCategory",SHOW_SIDE_NAV:"showSideNav",VIEW:"view",TAB:"tab",SHOW_UNAUTH_MODAL:"showUnauthModal",NEXT_URL:"nextUrl"}),t(186122),t(837855),t(467780),t(891546);let n=(e,a)=>{let t=(0,l.useRef)(void 0),n=()=>{t.current&&clearTimeout(t.current)};return(0,l.useEffect)(()=>n,[]),l=>{n(),t.current=setTimeout(()=>{e(l)},a)}}},312716(e,a,t){t.d(a,{A:()=>r});var l=t(859471),n=t(979638),o=t(783789),i=t(106910),s=t(132946);let r=function(e,a,t){let r=(0,n.Zp)(),{search:_,pathname:d="/"}=(0,n.zy)(),u=(0,l.useMemo)(()=>new URLSearchParams(_),[_]),p=l=>{let n="reset"!==a?(0,s.A)(window.location.search):{},_=(0,o.Wm)({..."resetWithoutRefresh"===a?{}:n,[e]:l});if(!a)return;let u=t?`${t}`:d,p=(0,i.A)(u,{..._});("push"===a||"resetWithoutRefresh"===a)&&r(p),"replace"===a&&r(p,{replace:!0}),"reset"===a&&(window.location.href=p),"replaceWithoutRefresh"===a&&n[e]!==l&&window.history.replaceState(null,"",p)};return function(a){"function"==typeof a?p(a((0,o.B0)(u.get(e)))):p(a)}}},783789(e,a,t){t.d(a,{Bz:()=>s,B0:()=>i,Wm:()=>o});var l=t(28054);let n=["US","CA","IT+ES+PT+GR+MT","IT","ES","DE+AT+CH","DE","GB+IE","FR","SE+DK+FI+NO","NL+BE+LU","PL+RO+HU+SK+CZ","MX+AR+CO+CL","CO","AR","MX","BR","AU+NZ","JP","ID","IN","MY","PH","TH","SA","EG","TR","KR","AE+SA+KW+QA+OM+BH+EG+IQ+DZ","IL+NG+PK+ZA+TR+MA+IN","CR+DO+EC+GT+PE","CY+CZ+GR+HU+MT+PL+RO+SK"];l.Ay.FILTER_INTEREST_IDS_PARAM_KEY,l.Ay.FILTER_AGE_IDS_PARAM_KEY,l.Ay.FILTER_GENDERS_PARAM_KEY,Object.freeze({UTM_SOURCE:"utm_source"});let o=e=>{let a={};for(let t in e){let l=e[t];null!==t&&""!==t.trim()&&null!=l&&""!==l.toString().trim()&&(a[t]=l)}return a},i=e=>e&&null!=e&&/^\d+$/.test(e.toString())?parseInt(e.toString(),10):e,s=(e,a)=>n.includes(e)?a[e]:void 0},248737(e,a,t){t.d(a,{M_:()=>s,SS:()=>n,by:()=>i,lq:()=>l});let l=e=>/instagram/i.test(e||""),n=e=>l(e)||/facebook/i.test(e||"")||/line/i.test(e||"")||/wechat/i.test(e||""),o="[Pinterest/Android]",i=e=>(e||"").includes("[Pinterest/iOS]")||(e||"").includes(o),s=e=>(e||"").includes(o)},383965(e,a,t){t.d(a,{$5:()=>g,Ay:()=>w,B0:()=>E,Fo:()=>h,Q7:()=>I,Rl:()=>p,YG:()=>c,_s:()=>v,lE:()=>b,n9:()=>O,oO:()=>d,xR:()=>m,zZ:()=>S});var l=t(859471),n=t(106386),o=t(18841),i=t(385384),s=t(663428),r=t(924708);let _=Date.now(),d=()=>(0,r.kF)(),u=()=>Date.now()-_,p=()=>(0,n.d4)(e=>e.currentUserTracker?.storageAccessAllowed??0),c=()=>(0,n.d4)(e=>e.currentUserTracker?.visitedUnauthPages??o.Ic),E=()=>(0,n.d4)(e=>e.currentUserTracker?.closeupPins??o.zF),S=()=>(0,n.d4)(e=>e.currentUserTracker?.completedSearches??o.xg),g=()=>(0,n.d4)(e=>e.currentUserTracker?.clickthroughPins??o.vC),m=()=>(0,n.d4)(e=>e.currentUserTracker?.savedPins??o.BP),T=()=>(0,n.d4)(e=>e.currentUserTracker?.revisitationState??(0,o.Cj)()),b=()=>{let e=(0,n.wA)();return(0,l.useCallback)((a,t)=>{e((0,i.z9)(a,t))},[e])},O=()=>{let e=(0,n.wA)();return(0,l.useCallback)(a=>{e((0,i.jx)(a))},[e])},h=()=>{let e=(0,n.wA)();return(0,l.useCallback)(a=>{e((0,i.ab)(a))},[e])},I=()=>{let e=(0,n.wA)();return(0,l.useCallback)(a=>{e((0,i.Ww)(a))},[e])},v=()=>{let e=(0,n.wA)();return(0,l.useCallback)(()=>{e((0,i.px)())},[e])},w=()=>{let e,a,t,o,r,_,w,y=(0,n.d4)(e=>e.currentUserTracker?.isAuthenticated??0),A=(0,n.d4)(e=>e.currentUserTracker?.country??""),N=(0,n.d4)(e=>e.currentUserTracker?.region??""),L=p(),C=c(),R=E(),P=S(),D=g(),M=(0,n.d4)(e=>e.currentUserTracker?.downloadedPinsCount??0),U=m(),f=(0,n.d4)(e=>e.currentUserTracker?.isQUS??0),G=T(),k=(0,n.d4)(e=>e.currentUserTracker?.daysSinceLastRevisitation??0),x=(0,n.d4)(e=>e.currentUserTracker?.isIAB??!1),H=(0,n.d4)(e=>e.currentUserTracker?.landingPageViewType??202),F=b(),W=O(),B=h(),V=I(),K=v(),q=(e=(0,n.wA)(),(0,l.useCallback)(a=>{e((0,i.vK)(a))},[e])),Y=(a=(0,n.wA)(),(0,l.useCallback)(e=>{a((0,i.rh)(e))},[a])),X=(t=(0,n.wA)(),o=T(),(0,l.useCallback)(()=>{let{state:e,wasUpdated:a}=(0,s.A)(o);a&&t((0,i.rh)(e))},[t,o])),j=(r=(0,n.wA)(),_=T(),(0,l.useCallback)(()=>{r((0,i.rh)({sessionTimestamps:_.sessionTimestamps}))},[r,_]));return{isAuthenticated:y,isStorageAllowed:L,isQUS:f,isIAB:x,landingPageViewType:H,setLandingPageViewType:(w=(0,n.wA)(),(0,l.useCallback)(e=>{w((0,i.gv)({viewType:e}))},[w])),closeupPins:R,visitedPages:C,setVisitedPage:F,completedSearches:P,setCompletedSearch:W,removeCompletedSearch:B,clickthroughPins:D,setClickthroughPin:V,downloadCount:M,updateDownloadCount:K,savedPins:U,setSavedPins:q,revisitationState:G,daysSinceLastRevisitation:k,updateRevisitation:Y,trackSessionStart:X,trackSessionEnd:j,getPinImpressionCount:d,getSessionDuration:u,country:A,region:N}}},385384(e,a,t){t.d(a,{KK:()=>n,Ww:()=>r,ab:()=>s,gv:()=>p,jx:()=>i,px:()=>_,rh:()=>u,vK:()=>d,z9:()=>o});let l="local",n={ADD_VISITED_PAGE:"ADD_VISITED_PAGE",ADD_COMPLETED_SEARCH:"ADD_COMPLETED_SEARCH",REMOVE_COMPLETED_SEARCH:"REMOVE_COMPLETED_SEARCH",ADD_CLICKTHROUGH_PIN:"ADD_CLICKTHROUGH_PIN",UPDATE_DOWNLOAD_COUNT:"UPDATE_DOWNLOAD_COUNT",UPDATE_SAVED_PINS:"UPDATE_SAVED_PINS",UPDATE_REVISITATION:"UPDATE_REVISITATION",SET_LANDING_PAGE_VIEW_TYPE:"SET_LANDING_PAGE_VIEW_TYPE"},o=(e,a)=>({type:n.ADD_VISITED_PAGE,payload:{path:e,pageType:a,storageType:l}}),i=e=>({type:n.ADD_COMPLETED_SEARCH,payload:{search:e,storageType:l}}),s=e=>({type:n.REMOVE_COMPLETED_SEARCH,payload:{query:e,storageType:l}}),r=e=>({type:n.ADD_CLICKTHROUGH_PIN,payload:{pin:e,storageType:l}}),_=()=>({type:n.UPDATE_DOWNLOAD_COUNT,payload:{storageType:l}}),d=e=>({type:n.UPDATE_SAVED_PINS,payload:{pins:e,storageType:l}}),u=e=>({type:n.UPDATE_REVISITATION,payload:{revisitation:e,storageType:l}}),p=({viewType:e})=>({type:n.SET_LANDING_PAGE_VIEW_TYPE,payload:{viewType:e}})},548719(e,a,t){function l(e,a){let{sessionTimestamps:t}=e,l=Date.now()-864e5*a;return t.filter(e=>e>=l).length}function n(e,a){let t=[...e,Date.now()];return t.length>a?t.slice(-a):t}t.d(a,{A:()=>l,c:()=>n})},663428(e,a,t){t.d(a,{A:()=>o});var l=t(18841),n=t(548719);let o=e=>e&&e.sessionTimestamps&&!(e.sessionTimestamps.length<1)&&e.ts?new Date().getTime()-e.ts>l.H3?{state:{...e,sessionTimestamps:(0,n.c)(e.sessionTimestamps,50)},wasUpdated:!0}:{state:e,wasUpdated:!1}:{state:(0,l.Cj)(),wasUpdated:!0}},549445(e,a,t){t.d(a,{A:()=>n});var l=t(805454);function n(e){let{expName:a,anyEnabled:t,group:n}=function({experimentsClient:e,skipActivation:a}){let{checkExperiment:t}=e,l=t("web_masonry_v2",{dangerouslySkipActivation:a});return l.group?{expName:"web_masonry_v2",...l}:{expName:"",anyEnabled:!1,group:""}}({experimentsClient:(0,l.A)(),skipActivation:e?.skipActivation??!1});return{expName:a,anyEnabled:t,group:n,isMeasureAllEnabled:"enabled_measure_all"===n||"enabled_measure_all_impression_fix"===n,isImpressionFixEnabled:"control_impression_fix"===n||"enabled_impression_fix"===n||"enabled_measure_all_impression_fix"===n}}},924708(e,a,t){t.d(a,{bi:()=>O,g$:()=>h,kF:()=>m});var l=t(859471),n=t(467780);let o=["ar","he"];var i=t(186122),s=t(549445),r=t(998619),_=t(991224),d=t(215122),u=t(759120),p=t(947519),c=t(29739),E=t(425347),S=t(876808);let g=0,m=()=>g,T={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"editorialBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}},b=({events:e,startTime:a,endTime:t})=>e?.filter(e=>e>=a&&e<=t)||[];function O({carouselData:e,closeupImpressionType:a,closeupNavigationType:t,componentType:m,contextLogData:O,clientTrackingParams:h,duploShouldTrackPinEvents:I,elementType:v,impressionAuxFields:w,inImpressionExp:y,impressionType:A,impressionsFramework:N,isPaused:L,loggingId:C,objectIdStr:R,slotIndex:P,trackCarousel:D,viewData:M,viewParameter:U,viewType:f,isPromoted:G,storyPinProductEventData:k}){let{logContextEvent:x}=(0,i.o)(),{logMrcVideoAdEventOnPlay:H}=(0,d.y)(),{addImpression:F}=(0,u._1)()||{},{logStat:W}=(0,p.xI)(),B=(0,c.A)(),V=(0,_.qJ)(),{isRTL:K}=(()=>{let{locale:e}=(0,n._8)();return{isRTL:(0,l.useMemo)(()=>{let a=(e??"").split("-")[0];return o.includes(a)},[e])}})(),q=N||r.A,Y=(0,l.useRef)(null),X=(0,l.useRef)(e=>{});X.current=l=>{let n=T[A],o=n.idType,i={clientTrackingParams:h,endTime:l.endTime,[o]:C,slotIndex:P,time:l.startTime,renderDuration:l.endTime-l.startTime,type:a,...w,forcedExit:"removed"===l.forcedExit?0:void 0};if("Pin"===A){g+=1;let e=[],a=l.visibleEvents||new Map,t=l.hiddenEvents||new Map;if((w&&w.isPromoted||G)&&[1,50,80,2,102].forEach(n=>{let o=b({events:a.get(n),startTime:l.startTime,endTime:l.endTime}),i=b({events:t.get(n),startTime:l.startTime,endTime:l.endTime});o.forEach(a=>{e.push({type:n,time:a||0,visible:!0})}),i.forEach(a=>{e.push({type:n,time:a||0,visible:!1})})}),i={...i,pinCellWidth:l.pinCellWidth||0,pinCellHeight:l.pinCellHeight||0,windowWidth:window?.innerWidth,windowHeight:window?.innerHeight,visibleEvents:e.sort((e,a)=>e.time-a.time)},Y.current){let e=Y.current.getBoundingClientRect(),a=window.scrollX||document.documentElement.scrollLeft,t=e.left+a;O={...O||{},number_of_columns:i.windowWidth&&i.pinCellWidth?Math.round((i.windowWidth-(K&&V?0:B))/i.pinCellWidth):null},i.columnIndex=i.pinCellWidth?Math.round((t-(K&&V?0:B))/i.pinCellWidth):void 0}w?.nearDupSignature&&F&&m&&[13007,13176,68].includes(m)&&F(w.nearDupSignature)}let s={component:m,object_id_str:R,view_type:f,view_data:M||{},view_parameter:U};if(D)e&&D&&x({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...i,..."canonical"===e.type?{carouselDataId:Number(e.carouselId??0),slotIndex:e.index,carouselSlotId:e.carouselSlots?.[e.index??0]&&Number(e.carouselSlots[e.index??0].slotId)}:{carouselDataId:Number(e.id??0),carouselSlotId:e.carousel_slots?.[e.index??0]&&Number(e.carousel_slots[e.index??0].id),slotIndex:e.index}}]},...s,aux_data:{...O}});else{let e={clientTrackingParams:h,event_type:n.eventType,...s,element:v,event_data:{[n.impressionType]:"Story"===A?i:[i],...k?{storyPinProductEventData:k}:{}},aux_data:{closeup_navigation_type:t,...O}};x(e),H(e)}I&&W("log_pin_impression")};let{expName:j,group:z}=(0,s.A)({skipActivation:!0}),Q=(0,_.Ay)(),$=(0,S.AJ)(),{isAuthenticated:Z}=(0,n._8)(),J=(0,l.useCallback)(()=>{let e=!1;try{let{current:a}=Y;if(a instanceof HTMLElement&&(!G||a.getElementsByTagName("img").length>0)){let t=q.start(a);t.onExitViewport(X.current).setDebugId(C||"unknown"),I&&t.onEnterViewport(()=>{W("log_pin_impression_track_enter_viewport")}),e=!0,z&&(0,E.GV)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:Q,experimentName:j,group:z,handlerId:$,isAuthenticated:Z,slotIndex:P??"unknown"}})}}catch{window.console.error('Can only track impressions for type "HTMLElement"')}I&&W("log_pin_impression_track",{didStartTracking:e})},[Y.current]);return(0,l.useEffect)(()=>(y&&!q.inExperiment&&q.setExperimentStatus(!0),L||J(),()=>{let{current:e}=Y;e instanceof HTMLElement&&(!G||e.getElementsByTagName("img").length>0)&&q.stop(e)}),[L,J]),Y}let h=({children:e,...a})=>e({impressionTrackerRef:O(a)})},912231(e,a,t){t.d(a,{F:()=>o,I:()=>n});var l=t(881080);function n(e,a){(0,l.A)("ðŸŽ¯ ENGAGEMENT_SCORE_CALCULATED",{trigger:e,...a})}function o(e,a){(0,l.A)("desktop"===e?"DESKTOP_UPSELL_DECISION":"MOBILE_UPSELL_DECISION",a)}},949453(e,a,t){t.d(a,{h:()=>o,w:()=>n});var l=t(3210);function n({PES:e,NUS:a,conversionIntentLevel:t,triggerAction:n,deviceType:o}){(0,l.PM)("engagement_score.calculated",{engagement_score:e,upsell_negative_score:a,user_intent_bucket:t,upsell_type_tag:"conversion",trigger_action:n,device_type:o})}function o({upsellType:e,decision:a,intentLevel:t,PES:n,NUS:o,experimentVariant:i}){(0,l.PM)("upsell.decision_with_intent",{upsell_type:e,decision:a,intent_level:t,pes:n,nus:o,experiment_variant:i})}},993641(e,a,t){t.d(a,{A:()=>s});var l=t(859471),n=t(106386),o=t(383965),i=t(805454);let s=()=>{let e=(0,n.wA)(),{checkExperiment:a}=(0,i.A)(),t=(0,n.d4)(e=>e.currentUserTracker);return(0,l.useCallback)(l=>{let n={...t,pinImpressionCount:(0,o.oO)()};"function"==typeof l?e(l({checkExperiment:a,currentUserTracker:n})):e({...l,payload:{..."payload"in l?l.payload:{},checkExperiment:a,currentUserTracker:n}})},[e,a,t])}},645274(e,a,t){t.d(a,{Ay:()=>h,kX:()=>m,mz:()=>O,vp:()=>c});var l=t(859471),n=t(106386),o=t(497398),i=t(248737),s=t(383965),r=t(395394),_=t(80611),d=t(425347);let u=Date.now(),p=()=>(0,n.d4)(e=>e.upsell?.mWebSignupModal.modal.isShown??!1),c=()=>(0,n.d4)(e=>e.upsell?.modal),E=()=>Date.now()-u,S=()=>(0,n.d4)(e=>e.upsell?.mWebSignupModal.isUnauthSharingModalsShown??!1),g=()=>(0,n.d4)(e=>!!e.upsell?.mWebSignupModal.modalHasShown),m=()=>(0,n.d4)(e=>e.upsell?.mWebSignupModal),T=Object.freeze(["CO","ID"]),b=e=>{if(!(0,i.SS)(e))return!1;let a=(0,r.V2)();return a.getItem(o.Ng)||((0,d.GV)("mobile_signup_modal.rules.suppress_for_social_in_app_browser"),a.setItem(o.Ng,"1")),!0},O=({isModalShown:e,isUnauthSharingModalsShown:a,modalHasShown:t,country:l,userAgent:n})=>!e&&!(a||t&&T.includes(l)||(0,_.K)()||b(n));function h(){let e,a,t,o,i=p(),r=(0,n.d4)(e=>e.upsell?.mWebSignupModal.modal),d=(0,n.d4)(e=>e.upsell?.mWebSignupModal.upsellEligibleNavigationCount);return{isModalShown:i,modal:r,upsellEligibleNavigationCount:d,isUnauthSharingModalsShown:S(),modalHasShown:g(),isUpsellEnabledGlobally:(e=p(),a=S(),t=g(),o=(0,n.d4)(e=>e.currentUserTracker),(0,l.useCallback)(()=>!e&&!(({isUnauthSharingModalsShown:e,modalHasShown:a,currentUserTracker:t})=>{let{country:l}=t,n=t.userAgent.raw;return e||a&&T.includes(l)||(0,_.K)()||b(n)})({isUnauthSharingModalsShown:a,modalHasShown:t,currentUserTracker:o}),[e,a,t,o])),getPinImpressionCount:s.oO,getSessionDuration:E}}},245899(e,a,t){t.d(a,{F_:()=>s,GY:()=>l,PO:()=>n,_k:()=>i,fI:()=>r,vR:()=>o});let l="RECORD_NAVIGATIONAL_PAGE",n="UPDATE_LATEST_L1_VERTICAL",o="RESET_UPSELL_TRIGGER_STATE",i="RECORD_SOCIAL_PIN_LANDING_PAGE",s="TRIGGER_SOCIAL_DELAY_MODAL",r="TRIGGER_SOCIAL_SCROLL_MODAL"},140776(e,a,t){t.d(a,{JR:()=>P,tj:()=>D,wz:()=>M});var l=t(424054),n=t(301248),o=t(912231),i=t(949453),s=t(245899),r=t(28019);let _="dweb_eoq_q3_standard",d="dweb_eoq_q3_advanced",u="mweb_eoq_q3_standard",p="mweb_eoq_q3_advanced",c="mweb_eoq_q4_advanced_ucan",E="mweb_eoq_q4_emergency_ucan",S="mweb_eoq_q4_advanced_non_ucan",g="mweb_eoq_q4_emergency_non_ucan",m="dweb_eoq_q4_advanced_ucan",T="dweb_eoq_q4_emergency_ucan",b="dweb_eoq_q4_advanced_non_ucan",O="dweb_eoq_q4_emergency_non_ucan",h=[{bundleId:"dweb_eoq_q3_standard",experimentKey:_,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:d,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:u,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:p,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_ucan",experimentKey:c,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_ucan",experimentKey:E,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_advanced_non_ucan",experimentKey:S,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{seo:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}},default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1,isModalNonDismissible:!0}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"mweb_eoq_q4_emergency_non_ucan",experimentKey:g,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0},seo:{shouldTriggerOnLand:!0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{default:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}},{bundleId:"dweb_eoq_q4_advanced_ucan",experimentKey:m,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_advanced_non_ucan",experimentKey:b,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{seo:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}},default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_ucan",experimentKey:T,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,isModalNonDismissible:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}},{bundleId:"dweb_eoq_q4_emergency_non_ucan",experimentKey:O,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:0}},stateOverride:{default:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"}}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{default:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}},social_pin_landing_modal_trigger:{stateOverride:{default:{modal:{displayProps:{isModalNonDismissible:!0,signupFlow:{type:"signup"}}}}}}}}];function I(e,a){let t=h.filter(t=>{if(!t.active||!t.overrides[e])return!1;switch(t.experimentKey){case _:return a("dweb_eoq_q3_standard").anyEnabled;case d:return a("dweb_eoq_q3_advanced").anyEnabled;case u:return a("mweb_eoq_q3_standard").anyEnabled;case p:return a("mweb_eoq_q3_advanced").anyEnabled;case c:return a("mweb_eoq_q4_advanced_ucan").anyEnabled;case E:return a("mweb_eoq_q4_emergency_ucan").anyEnabled;case S:return a("mweb_eoq_q4_advanced_non_ucan").anyEnabled;case g:return a("mweb_eoq_q4_emergency_non_ucan").anyEnabled;case m:return a("dweb_eoq_q4_advanced_ucan").anyEnabled;case T:return a("dweb_eoq_q4_emergency_ucan").anyEnabled;case b:return a("dweb_eoq_q4_advanced_non_ucan").anyEnabled;case O:return a("dweb_eoq_q4_emergency_non_ucan").anyEnabled;default:return!1}});return t[t.length-1]?.overrides[e]}let v=e=>({id:e.id,evaluate:function({ruleId:e,baseEvaluateFunction:a}){return t=>{let{checkExperiment:l,currentUserTracker:n}=t,o=l&&I(e,l)?.evaluateContextOverride||{},i=o[n?.channel??"default"]||o.default||{};return a((0,r.A)(t,i))}}({ruleId:e.id,baseEvaluateFunction:e.evaluate}),getNextState:function({ruleId:e,baseNextStateFunction:a}){return({action:t,state:l,decision:n})=>{let o=a({action:t,state:l,decision:n});if(!("payload"in t&&"object"==typeof t.payload&&null!==t.payload&&"checkExperiment"in t.payload))return o;let i="currentUserTracker"in t.payload?t.payload.currentUserTracker:void 0,s=I(e,t.payload.checkExperiment)?.stateOverride||{},_=s[i?.channel??"default"]||s.default||{};return 0===Object.keys(_).length?o:(0,r.A)(o,_)}}({ruleId:e.id,baseNextStateFunction:e.getNextState})});var w=t(429735);let y=e=>{let a=e?.("lop_dweb_blocking_upsell")?.group??"";return"enabled_1"===a||"enabled_3"===a?{isWashBlocking:!0,isModalNonDismissible:!0}:"enabled_2"===a?{isWashBlocking:!0,isModalNonDismissible:!1}:{isWashBlocking:!1,isModalNonDismissible:!1}},A=["enabled","enabled_no_legal","enabled_copy_2"],N=["enabled_copy_2_no_legal","enabled_copy_2_with_legal"],L=["enabled_copy_2_no_legal","enabled_copy_2_with_legal","enabled_copy_2_no_legal_3_2","enabled_copy_2_with_legal_3_2"],C=["enabled_static","enabled_animated"],R=(e,a)=>{let t={enabled_1:["high","medium"],enabled_2:["high"],enabled_3:["medium"],enabled_4:["medium","low"]}[a];return!!t&&t.includes(e||"unknown")},P={shouldShowRelatedPinsGradientUpsell:v({id:"desktop_related_pins_gradient_upsell_trigger",evaluate:({relatedPinsGradientUpsellEverShown:e,checkExperiment:a})=>{if(e)return!1;let t=a?.("ce_dweb_unauth_related_pins_limit");return!!t?.anyEnabled},getNextState:({state:e})=>({...e,showRelatedPinsGradientUpsell:!0,relatedPinsGradientUpsellEverShown:!0})}),shouldShowCloseupNavigationalModal:v({id:"closeup_navigational_modal_trigger",evaluate:({pinViewCount:e,navigationalPagesUpsellSeen:a,checkExperiment:t})=>!t?.("pc_no_navigational_upsell").anyEnabled&&(e??0)>=4&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}),shouldShowSaveModal:v({id:"save_modal_trigger",evaluate:()=>!0,getNextState:({action:e,state:a})=>{let{checkExperiment:t}=e.payload,l=y(t);return{...a,pinSaveCount:a.pinSaveCount+1,pinId:e.payload.pinId,attributionLabel:e.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:e.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:e.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp",...l}}}}}),shouldShowNavigationalModal:v({id:"desktop_navigational_modal_trigger",evaluate:({uniqueNavigationalPagesSeen:e=[],navigationalPagesUpsellSeen:a,navigationalPagesViewThresholdDesktop:t,checkExperiment:l})=>!l?.("pc_no_navigational_upsell").anyEnabled&&e.length>=(t??4)&&!a,getNextState:({state:e,action:a})=>{let{checkExperiment:t}=a.payload,l=y(t);return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_${a.payload.containerPage}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP",...l}},navigationalPagesUpsellSeen:!0}}}),shouldShowNavigationalModalIntentBased:v({id:"desktop_navigational_modal_intent_trigger",evaluate:({navigationalPagesUpsellSeen:e,engagementScore:a,checkExperiment:t})=>{let l=t?.("engagement_score_v0_dweb");if(!l?.anyEnabled||e)return!1;let{conversionIntentLevel:n,PES:s,NUS:r}=a||{},_=R(n,l.group);return(0,o.F)("desktop",{variant:l.group,decision:_?"SHOW":"SKIP",intentLevel:n,PES:s||0,NUS:r||0,reason:_?`Intent ${n} in allowed list`:`Intent ${n} NOT in allowed list`}),(0,i.h)({upsellType:"navigation_desktop",decision:_?"show":"skip",intentLevel:n||"unknown",PES:s||0,NUS:r||0,experimentVariant:l.group}),_},getNextState:({state:e,action:a})=>{let{conversionIntentLevel:t,PES:l,NUS:n}=e.engagementScore||{};return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:`navigation_intent_${t}_pes_${l||0}_nus_${n||0}`,container:a.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0}}}),shouldShowSignupModalOnCloseUpClick:v({id:"closeup_modal_trigger",evaluate:({modal:e,clickCloseUp:a})=>!e?.isShown&&!a,getNextState:({state:e,action:a})=>{let{checkExperiment:t}=a.payload??{},l=y(t);return{...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP",...l}},clickCloseUp:!0}}}),shouldShowSignupModalOnClickContextMenuSaveButton:v({id:"context_menu_save_button_trigger",evaluate:({modal:e,clickContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let t,{checkExperiment:l}=e.payload,n=y(l);return t=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource",...n}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId,...n},{...a,modal:{isShown:!0,displayProps:t},clickContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnClickCloseupSaveButton:v({id:"closeup_save_button_trigger",evaluate:({modal:e,clickCloseUpContextMenuSaveButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>{let t,l=y(e.payload.checkExperiment);return t=["enabled_all_improved","enabled_all","enabled_save"].includes(e.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===e.payload.signupToLoginExpGroup?"saveButton":"defaultSource",...l}:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_save_button`,container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:e.payload.pinId,...l},{...a,modal:{isShown:!0,displayProps:t},clickCloseUpContextMenuSaveButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnContextMenuDownloadClick:v({id:"desktop_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:t})=>!!((e||a)&&!t?.isShown),getNextState:({action:e,state:a})=>{let t,l=y(e.payload.checkExperiment);return t=e.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell",...l}:{signupFlow:{type:"signup"},attributionLabel:`click_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId,...l},{...a,modal:{isShown:!0,displayProps:t},clickContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnCloseupDownloadClick:v({id:"closeup_download_button_trigger",evaluate:({limitReached:e,modal:a})=>!!(e&&!a?.isShown),getNextState:({action:e,state:a})=>{let t=y(e.payload.checkExperiment);return{...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:`click_context_menu_${e.payload.attributionLabelSource}_download_button`,container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:e.payload.pinId,...t}},clickCloseUpContextMenuDownloadButton:!0,pinId:e.payload.pinId??"",attributionLabel:e.payload.attributionLabelSource}}}),shouldShowSignupModalOnFollowButtonClick:v({id:"follow_button_trigger",evaluate:({modal:e,clickFollowButton:a})=>!e?.isShown&&!a,getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:e.payload.isContextualFollowEnabled?"follow":"upsellRules_unspecified_container",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:e.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}),shouldShowSignupModalOnFollowingButtonClick:v({id:"following_button_trigger",evaluate:({modal:e,clickFollowingButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}),shouldShowSignupModalOnFollowersButtonClick:v({id:"followers_button_trigger",evaluate:({modal:e,clickFollowersButton:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}),shouldShowLoginModalOnCommentComposerClick:v({id:"comment_composer_trigger",evaluate:({modal:e,clickCommentComposerUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}),shouldShowLoginModalOnRelatedPinOpenLinkClick:v({id:"related_pin_open_link_trigger",evaluate:({modal:e,clickRelatedPinOpenLinkUpsell:a})=>!e?.isShown&&!a,getNextState:({state:e})=>({...e,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}),shouldShowLoginModalOnPinLinkClick:v({id:"pin_link_trigger",evaluate:({modal:e,pinLinkClickCount:a=0})=>!e?.isShown&&(2===a||a%5==0),getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:e.payload.count})}),shouldShowSocialPinLandingModal:v({id:"social_pin_landing_modal_trigger",evaluate:({inviter:e,socialPinLandingModalShown:a,checkExperiment:t})=>{if(!e||a)return!1;let l=t?.("ce_dweb_unauth_splp_blocking").anyEnabled,n=t?.("ce_dweb_unauth_splp_blocking_no_delay").anyEnabled,o=t?.("ce_dweb_unauth_splp_blocking_3s").anyEnabled;return!!(l||n||o)},getNextState:({action:e,state:a})=>({...a,modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.type===s.F_?`delay_${e.payload.containerPage}`:`scroll_${e.payload.containerPage}`,container:e.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})}),shouldShowScrollingBox:{id:"desktop_scrolling_box_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},D={shouldShowSaveEducationPopover:v({id:"mobile_save_education_popover_trigger",evaluate:({saveEducationPopoverEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:t}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!t?.startsWith("enabled_group_board")},getNextState:({state:e})=>({...e,showSaveEducationPopover:!0,saveEducationPopoverEverShown:!0})}),shouldShowReplyToSenderSheet:v({id:"mobile_reply_to_sender_sheet_trigger",evaluate:({replyToSenderSheetEverShown:e,checkExperiment:a})=>{if(e)return!1;let{group:t}=a?.("ce_mweb_unauth_social_feature_education")||{};return!!t?.startsWith("enabled_reply_to_sender")},getNextState:({state:e})=>({...e,showReplyToSenderSheet:!0,replyToSenderSheetEverShown:!0})}),shouldShowRelatedPinsGradientUpsell:v({id:"mobile_related_pins_gradient_upsell_trigger",evaluate:({checkExperiment:e})=>!!e?.("ce_mweb_unauth_related_pins_limit").anyEnabled,getNextState:({state:e})=>({...e,showRelatedPinsGradientUpsell:!0})}),shouldAllowUnauthSave:v({id:"mobile_unauth_save_quota_check",evaluate:({isPPMAndroidUnauthExperience:e,isFromUnauthContextMenu:a,currentUnauthSaves:t=0,mobileUnauthSaveThreshold:l})=>!a&&!e&&t<(l??2),getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:e.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===e.payload.headingType?"click_save_button_with_max_unauth_saves":e.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageNavigationalModal:v({id:"mobile_main_pin_image_modal",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,isModalCurrentlyShown:t,learningUpsellScenario:l,forceShowModal:n})=>{let o=l&&a&&!t&&(e?.("mweb_unauth_main_learning_pin_full_page").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced").anyEnabled||e?.("mweb_q2_mau_push_pc_advanced_row").anyEnabled||e?.("mweb_q2_mau_push_pc_emergency_row").anyEnabled||e?.("mweb_q2_mau_push_pc_eu_safe").anyEnabled);return l&&(n||!!o)},getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal?.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:e.payload.pinId}}})}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:({state:e})=>e,evaluate:({learningUpsellScenario:e,hasConversionUpsell:a,isLearningAppUpsellShown:t})=>a||!e?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:t,newState:!t}},shouldShowNavigationUpsell:v({id:"mobile_navigation_upsell",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:t,isNavigationFromSwipe:l,currentNavigationCount:n,hasSeenModal:o,pageThreshold:i,isWashDismissible:s,canShowSignupModalOnRouteChange:r,navigationalPagesViewThresholdMobile:_,checkExperiment:d})=>{if(d?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=_||i||4;if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!(e&&!l))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let p=!!t&&!!d&&(0,w.A)(d,t),c=d?.("mweb_feature_upsell_animated_video")?.group??"",E=C.includes(c),S=d?.("mweb_feature_upsell_copy_visual_combination_v5")?.group??"",g="control"===S||L.includes(S),m=d?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",T="control"===m||N.includes(m);if(!(t&&r?.(t,p)))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(!((n??0)>=u)||o)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let b=L.includes(S),O=N.includes(m),h=d?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",I=A.includes(h),v=d?.("mweb_feature_upsell_copy_visual_combination_v2"),y=v?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_${u}_${n}`,allowCloseOnOutsideClick:s,headingType:E?"mweb_feature_upsell_animated_visual_combination":T?O?"mweb_feature_upsell_copy_visual_combination_v4":"none":g?b?"mweb_feature_upsell_copy_visual_combination_v5":"none":I?"mweb_feature_upsell_copy_visual_combination_v3":y?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowNavigationUpsellIntentBased:v({id:"mobile_navigation_upsell_intent",evaluate:({isUpsellEnabledGlobally:e,isModalCurrentlyShown:a,newLocation:t,isNavigationFromSwipe:l,hasSeenModal:n,canShowSignupModalOnRouteChange:s,engagementScore:r,checkExperiment:_})=>{let d=_?.("engagement_score_v0_mweb");if(!d?.anyEnabled)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};let u=!!t&&!!_&&(0,w.A)(_,t),p=_?.("mweb_feature_upsell_animated_video")?.group??"",c=C.includes(p),E=_?.("mweb_feature_upsell_copy_visual_combination_v5")?.group??"",S="control"===E||L.includes(E),g=_?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",m="control"===g||N.includes(g);if(a)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!e||l||!t||!s?.(t,u))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(n)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let{conversionIntentLevel:T,PES:b,NUS:O}=r||{},h=R(T,d.group);if((0,o.F)("mobile",{variant:d.group,decision:h?"SHOW":"SKIP",intentLevel:T,PES:b||0,NUS:O||0,reason:h?`Intent ${T} in allowed list`:`Intent ${T} NOT in allowed list`}),(0,i.h)({upsellType:"navigation_mobile",decision:h?"show":"skip",intentLevel:T||"unknown",PES:b||0,NUS:O||0,experimentVariant:d.group}),!h)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};let I=L.includes(E),v=N.includes(g),y=_?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",P=A.includes(y),D=_?.("mweb_feature_upsell_copy_visual_combination_v2"),M=D?.anyEnabled??!1;return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:`navigation_intent_${T}_pes_${b||0}_nus_${O||0}`,allowCloseOnOutsideClick:!0,headingType:c?"mweb_feature_upsell_animated_visual_combination":m?v?"mweb_feature_upsell_copy_visual_combination_v4":"none":S?I?"mweb_feature_upsell_copy_visual_combination_v5":"none":P?"mweb_feature_upsell_copy_visual_combination_v3":M?"mweb_feature_upsell_copy_visual_combination_v2":"none"}},getNextState:({state:e,decision:a})=>({...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:a?.headingType??"none",trigger:{attributionLabel:a?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!a?.allowCloseOnOutsideClick},pinId:null}}})}),shouldShowOnLandUpsell:v({id:"mobile_on_land_upsell",evaluate:({checkExperiment:e,isUpsellEnabledGlobally:a,hasSeenNavUpsell:t,location:o,userAgent:i,showUnauthMwebSocialDefaultModalUpsell:s,isSocialInAppBrowser:r,shouldTriggerOnLand:_=!1})=>{let d;if(e?.("pc_no_navigational_upsell").anyEnabled)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let u=!!o&&!!e&&(0,w.A)(e,o);if(!a||t||!(o&&((0,l.dM)(o)||(0,l.iK)(o)||(0,n.A)(o)||(0,l._p)(o)||(0,l.ZX)(o)||u&&(0,l.wd)(o))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let p=!(r?.(i)&&e?.("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled)&&s,c=p?"":e?.("mweb_feature_upsell_animated_video")?.group??"",E=C.includes(c),S=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v5")?.group??"",g="control"===S||L.includes(S),m=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v4")?.group??"",T="control"===m||N.includes(m);if(!s&&!_)return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};let b=L.includes(S),O=N.includes(m),h=p?"":e?.("mweb_feature_upsell_copy_visual_combination_v3")?.group??"",I=A.includes(h),v=p?null:e?.("mweb_feature_upsell_copy_visual_combination_v2"),y=v?.anyEnabled??!1;if("social"===(d=p?"social":E?"mweb_feature_upsell_animated_visual_combination":T?O?"mweb_feature_upsell_copy_visual_combination_v4":"none":g?b?"mweb_feature_upsell_copy_visual_combination_v5":"none":I?"mweb_feature_upsell_copy_visual_combination_v3":y?"mweb_feature_upsell_copy_visual_combination_v2":"none")&&e){let a=e("ce_mweb_visual_plp_upsell");if(a.anyEnabled)switch(a.group){case"enabled_1":d="social_visual_1";break;case"enabled_2":d="social_visual_2";break;case"enabled_3":d="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:p,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:o,oldLocation:o},headingType:d}}},getNextState:({state:e,decision:a})=>{let{modalConfig:t}=a;return{...e,mWebSignupModal:{...e.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(e.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:e.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:t?.headingType,trigger:{attributionLabel:t?.attributionLabel??"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}}}}}),shouldShowSignupModalOnContextMenuDownloadClick:v({id:"mobile_context_menu_download_button_trigger",evaluate:({limitReached:e,inImmediateUpsellGroup:a,modal:t})=>(e||a)&&!t?.isShown,getNextState:({action:e,state:a})=>{let{inMwebDownloadCTAExp:t,showDownloadCloseupIcon:l,attributionLabelSource:n}=e.payload,o={trigger:{attributionLabel:`click_${n}_download_button`,reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:t||l?"download_limit_reached":"none"};return{...a,mWebSignupModal:{...a.mWebSignupModal,modal:{isShown:!0,displayProps:o,pinId:e.payload.pinId??""}}}}}),shouldShowSignupModalOnFollowButtonClickMobile:v({id:"follow_button_trigger_mobile",evaluate:({mWebSignupModal:e})=>!e?.modal.isShown,getNextState:({action:e,state:a})=>({...a,mWebSignupModal:{...a.mWebSignupModal,lastShownTime:Date.now(),timesShownForSessionCount:(a.mWebSignupModal.timesShownForSessionCount??0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:e.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}}})}),shouldShowFloatingBanner:{id:"mobile_floating_banner_trigger",evaluate:({checkExperiment:e})=>!e?.("pc_no_navigational_upsell").anyEnabled,getNextState:({state:e})=>e}},M={desktop:P,mobile:D}},666971(e,a,t){t.d(a,{$B:()=>es,$D:()=>ef,$n:()=>O,A2:()=>et,A4:()=>T,AD:()=>y,C8:()=>ew,CV:()=>eT,Dx:()=>er,EY:()=>k,Eb:()=>eG,Fe:()=>N,G0:()=>A,HI:()=>eU,IP:()=>H,Ip:()=>f,J3:()=>eS,J4:()=>eA,JP:()=>L,KL:()=>Q,KP:()=>el,LB:()=>ey,Ll:()=>ex,M:()=>eo,Mh:()=>M,My:()=>$,Oy:()=>eg,PH:()=>b,Pm:()=>eC,RD:()=>eH,Rj:()=>ec,SI:()=>K,SJ:()=>Z,Ss:()=>m,St:()=>eW,Tt:()=>eB,Uk:()=>X,V$:()=>eD,Vi:()=>ea,Vl:()=>ed,WD:()=>C,WJ:()=>ek,XV:()=>ee,Y0:()=>eh,Yp:()=>ei,Z2:()=>eN,Z6:()=>e_,ZF:()=>g,_7:()=>h,_k:()=>eP,_q:()=>V,bw:()=>ev,cG:()=>en,cM:()=>eb,d6:()=>F,dh:()=>R,eM:()=>eI,f8:()=>ep,fQ:()=>W,gk:()=>B,gl:()=>eL,gr:()=>D,h4:()=>I,hq:()=>z,ib:()=>eM,is:()=>eO,j6:()=>q,jw:()=>Y,kx:()=>eu,lI:()=>E,nH:()=>J,nj:()=>eV,no:()=>j,oW:()=>p,oj:()=>w,op:()=>em,pV:()=>eE,rD:()=>d,s4:()=>P,sL:()=>S,ts:()=>eR,u5:()=>u,vh:()=>eF,xD:()=>G,xS:()=>x,xl:()=>v,yi:()=>U,zm:()=>c});var l=t(248737),n=t(3210),o=t(645274),i=t(245899),s=t(140776),r=t(463360),_=t(425347);let d="PROCESS_MOBILE_NAVIGATION_CHANGE",u="SET_UPSELL_REASON",p="UPS_EVENT_PIN_VIEW",c="UPS_EVENT_PIN_SAVE",E="UPS_EVENT_DESKTOP_MODAL_SHOW",S="UPS_EVENT_DESKTOP_MODAL_DISMISSED",g="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",m="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",T="TRIGGER_SCROLL_DOWN_UPSELL",b="CLEAR_SCROLL_DOWN_UPSELL",O="DISMISS_BOTTOM_RIGHT_BANNER",h="TRIGGER_SAVE_EDUCATION_POPOVER",I="CLEAR_SAVE_EDUCATION_POPOVER",v="TRIGGER_RELATED_PINS_GRADIENT_UPSELL",w="CLEAR_RELATED_PINS_GRADIENT_UPSELL",y="TRIGGER_MOBILE_RELATED_PINS_GRADIENT_UPSELL",A="TRIGGER_REPLY_TO_SENDER_SHEET",N="CLEAR_REPLY_TO_SENDER_SHEET",L="CLICK_CLOSEUP_UPSELL",C="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",R="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",P="CLICK_FOLLOW_BUTTON_UPSELL",D="CLICK_FOLLOWING_BUTTON_UPSELL",M="CLICK_FOLLOWERS_BUTTON_UPSELL",U="CLICK_COMMENT_COMPOSER_UPSELL",f="CLICK_PIN_LINK_UPSELL",G="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",k="SHOW_MOBILE_SIGNUP_MODAL",x="DISMISS_MOBILE_SIGNUP_MODAL",H="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",F="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",W="HIDE_UNAUTH_SHARING_MODALS",B="SHOW_UNAUTH_SHARING_MODALS",V="RESTORE_FROM_LOCAL_STORAGE",K="MAIN_PIN_IMAGE_CLICK_MOBILE",q="ON_LAND_UPSELL_MOBILE",Y="SET_LEARNING_UPSELL_VISIBILITY",X="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",j="DISMISS_MOBILE_FLOATING_UPSELL",z="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",Q="INCREMENT_PIN_SAVE_COUNT",$="DECREMENT_PIN_SAVE_COUNT",Z="INCREMENT_UNAUTH_CLICKTHROUGH_COUNT",J="UPS_EVENT_PIN_SAVE_MOBILE",ee="SET_REFERRED_APP_UPSELL_STATE",ea=e=>({type:V,payload:{upsellEligibleNavigationCount:e}}),et=e=>({type:u,payload:{upsellReason:e}}),el=(e,a,t,l,n)=>({type:p,payload:{pinId:e,seoUrl:a,componentType:t,viewParameter:l,checkExperiment:n}}),en=(e,a)=>({type:c,payload:{pinId:e,attributionLabel:a}}),eo=()=>({type:S}),ei=()=>({type:O}),es=e=>({type:E,payload:{displayProps:e}}),er=()=>({type:L}),e_=(e,a,t)=>({type:C,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:t}}),ed=(e,a)=>({type:P,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eu=(e,a,t,l)=>({type:g,payload:{pinId:e,attributionLabelSource:a,signupToLoginExpGroup:t,checkExperiment:l}}),ep=()=>({type:D}),ec=()=>({type:M}),eE=()=>({type:U}),eS=e=>({type:f,payload:{count:e}}),eg=()=>({type:G}),em=(e,a)=>({checkExperiment:t,currentUserTracker:l})=>n=>{n({type:i.GY,payload:{pageUniqueKey:e,containerPage:a,checkExperiment:t,currentUserTracker:l}})},eT=e=>({type:i.PO,payload:{l1Vertical:e}}),eb=(e,a)=>({type:i._k,payload:{inviter:e,containerPage:a}}),eO=e=>({checkExperiment:a})=>t=>{t({type:i.F_,payload:{containerPage:e,checkExperiment:a}})},eh=e=>({checkExperiment:a})=>t=>{t({type:i.fI,payload:{containerPage:e,checkExperiment:a}})},eI=()=>({type:I}),ev=()=>({checkExperiment:e})=>a=>{a({type:v,payload:{checkExperiment:e}})},ew=()=>({type:w}),ey=()=>({checkExperiment:e,currentUserTracker:a})=>t=>{let{group:l}=e?.("ce_mweb_unauth_social_feature_education")||{};l?.startsWith("enabled_group_board")?t((({checkExperiment:e})=>a=>{a({type:h,payload:{checkExperiment:e}})})({checkExperiment:e,currentUserTracker:a})):l?.startsWith("enabled_reply_to_sender")&&t((({checkExperiment:e})=>a=>{a({type:A,payload:{checkExperiment:e}})})({checkExperiment:e,currentUserTracker:a}))},eA=()=>({type:N}),eN=e=>({type:k,payload:e}),eL=()=>({type:x}),eC=e=>({type:H,payload:{topInterest:e}}),eR=()=>({type:F}),eP=()=>({type:W}),eD=()=>({type:B}),eM=e=>({checkExperiment:a,currentUserTracker:t})=>(l,o)=>{l({type:d,payload:{...e,checkExperiment:a,currentUserTracker:t}});let i=o().upsell;(0,r.A)(i)||(0,n.PM)(`mweb.nav.upsell.show.${e.currentNavigationCount}`)},eU=e=>({checkExperiment:a,currentUserTracker:t})=>(i,r)=>{let d=r().upsell,{country:u}=t,p=t.userAgent.raw,c=s.wz.mobile.shouldShowOnLandUpsell?.evaluate({checkExperiment:a,isUpsellEnabledGlobally:(0,o.mz)({isModalShown:d.mWebSignupModal.modal.isShown??!1,isUnauthSharingModalsShown:d.mWebSignupModal.isUnauthSharingModalsShown??!1,modalHasShown:!!d.mWebSignupModal.modalHasShown,country:u,userAgent:p}),hasSeenNavUpsell:d.mWebSignupModal.modalHasShown,location:e.location,isPaid:e.isPaid,isSocial:e.isSocial,isDirect:e.isDirect,isSEO:e.isSEO,userAgent:p,showUnauthMwebSocialDefaultModalUpsell:e.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:l.SS,currentUserTracker:t});c.shouldShowModal&&c.modalConfig&&((0,n.PM)("mweb.nav.upsell.show.0"),c.showUnauthMwebSocialUpsell&&(0,_.GV)("unauth.mweb.social.pin.upsell",{sampleRate:1}),i({type:q,payload:{decision:c,checkExperiment:a}}))},ef=e=>({checkExperiment:a,currentUserTracker:t})=>(l,o)=>{let i=o().upsell,r=!!i.appUpsells.learningUpsell?.isShown,_=s.wz.mobile.shouldShowMainPinImageNavigationalModal?.evaluate({checkExperiment:a,currentUserTracker:t,isUpsellEnabledGlobally:e.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:e.upsellContext.isModalShown,learningUpsellScenario:e.learningUpsellScenario}),d=s.wz.mobile.shouldShowMainPinImageAppUpsell?.evaluate({learningUpsellScenario:e.learningUpsellScenario,hasConversionUpsell:!!_,isLearningAppUpsellShown:r});_?(0,n.PM)("mweb.nav.upsell.show.main_pin_image_click"):d.shouldToggleAppUpsell?d.currentlyShowing?e.trackInteraction({action:"dismiss",item:"learning-upsell"}):e.trackInteraction({action:"click",item:"learning-upsell"}):e.onImageClick(),l({type:K,payload:{conversionDecision:_,appUpsellDecision:d,checkExperiment:a,pinId:e.pinId}})},eG=({isShown:e,isDismissedByUser:a=!1})=>({type:Y,payload:{isShown:e,isDismissedByUser:a}}),ek=({isDismissedByUser:e=!1}={})=>({type:j,payload:{isDismissedByUser:e}}),ex=(e,a)=>({type:z,payload:{isIdeaPin:e,isContextualFollowEnabled:a}}),eH=()=>({type:$}),eF=()=>({type:Z}),eW=e=>({checkExperiment:a})=>(t,l)=>{let n=l().upsell;s.wz.mobile.shouldAllowUnauthSave?.evaluate({checkExperiment:a,isPPMAndroidUnauthExperience:e.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:e.isFromUnauthContextMenu,currentUnauthSaves:e.unauthSavedPinsStore.pins.length})&&!n.mWebSignupModal.modal.isShown?(e.unauthSavedPinsStore.save({id:e.pinId,nodeId:e.nodeId,imageUrl:e.getPinGifOrImageSrc({imagesUrls:e.imagesUrls,embedSrc:e.embedSrc,embedType:e.embedType,excludeOriginals:!e.isBot&&!e.isSocialBot})}),t({type:Q}),e.handleShowNavFooter(t,e.forceShowNavFooter,e.isNavBarHidden,e.setForceShowNavFooter),e.successCallback&&e.successCallback()):t({type:J,payload:{attributionLabel:e.isFromUnauthContextMenu?e.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:e.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:e.pinId,checkExperiment:a}})},eB=({isShown:e,appUpsellType:a,isBlocking:t})=>({type:ee,payload:{isShown:e,appUpsellType:a,isBlocking:t}}),eV=()=>({checkExperiment:e})=>a=>{a({type:y,payload:{checkExperiment:e}})}},463360(e,a,t){t.d(a,{A:()=>l});let l=e=>{let{modal:a,mWebSignupModal:t,appUpsells:l}=e;return!!(a.isShown||t.modal.isShown||l.learningUpsell?.isShown||l.iabAppUpsell?.isShown)}},429735(e,a,t){t.d(a,{A:()=>n});var l=t(424054);function n(e,a,t=!1){return!!(0,l.wd)(a)&&e?.("lop_eoq_lever_nav_mweb",{dangerouslySkipActivation:t}).anyEnabled}},759120(e,a,t){t.d(a,{_1:()=>c,k0:()=>S});var l=t(840910),n=t(859471),o=t(968918),i=t(497398),s=t(4513),r=t(805454),_=t(395394),d=t(425347),u=t(562615);let{Provider:p,getMaybe:c}=(0,s.A)("CloseupNearDupSigsTracker"),E=({group:e,children:a})=>{(0,n.useEffect)(()=>{(0,l.A)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let t=(0,_.V2)(),s=(0,n.useRef)([]),r=(0,n.useRef)(new Set),c=(0,n.useRef)([]),E=(0,n.useRef)(new Set),S=(0,n.useRef)(null),g=(0,n.useMemo)(()=>e.includes("enabled_10")?10:e.includes("enabled_20")?20:35,[e]),m=(0,o.YQ)(()=>{e.includes("session_sync")&&(t.setItem(i.kA,s.current),t.setItem(i.Ex,c.current))},500),T=(0,n.useCallback)(()=>{if(!e.includes("session_sync"))return;let a=Date.now(),l=t.getItem(i.kA),n=t.getItem(i.Ex);if(l)try{Array.isArray(l)&&l.every(e=>"string"==typeof e)&&(s.current=l.slice(-5),r.current=new Set(s.current))}catch(e){(0,d.GV)("closeup_page.near_dup.session_storage_sync.closeup.fail",{sampleRate:1})}if(n)try{Array.isArray(n)&&n.every(e=>"string"==typeof e)&&(c.current=n.slice(-g),E.current=new Set(c.current))}catch(e){(0,d.GV)("closeup_page.near_dup.session_storage_sync.impression.fail",{sampleRate:1})}(0,d.N9)("closeup_page.near_dup.session_storage_sync.success",Date.now()-a,{sampleRate:.1,tags:{status:"success"}})},[s,c,t,e,g]),b=(0,n.useCallback)(e=>{if(E.current.has(e)&&(c.current=c.current.filter(a=>a!==e)),c.current.length>=g){let e=c.current.shift();e&&E.current.delete(e)}E.current.add(e),c.current.push(e)},[g]),O=(0,n.useCallback)(e=>{if(r.current.has(e)&&(s.current=s.current.filter(a=>a!==e)),s.current.length>=5){let e=s.current.shift();e&&r.current.delete(e)}r.current.add(e),s.current.push(e),m()},[m]),h=(0,n.useCallback)(e=>{if(S.current===e)return[];let a=Date.now();0===s.current.length&&0===c.current.length&&T();let t=Array.from(new Set([...c.current,...s.current]));return S.current=e,(0,d.N9)("closeup_page.near_dup.get_tracked_sigs.success",Date.now()-a,{sampleRate:.1,tags:{status:"success"}}),t},[T]);(0,n.useEffect)(()=>m,[m]);let I=(0,n.useMemo)(()=>({addImpression:b,addCloseup:O,getTrackedNearDupSigs:h}),[b,O,h]);return(0,u.jsx)(p,{value:I,children:a})},S=({children:e})=>{(0,n.useEffect)(()=>{(0,l.A)("CloseupNearDupSigsTrackerContext","/app/www/closeup/CloseupNearDupSigsTrackerContext.tsx")},[]);let{checkExperiment:a}=(0,r.A)(),{anyEnabled:t,group:o}=a("web_closeup_rabbit_hole_dedup");return!t||!o||o.includes("pwt")?(0,u.jsx)(p,{value:void 0,children:e}):(0,u.jsx)(E,{group:o,children:e})}},947519(e,a,t){t.d(a,{J0:()=>u,Yj:()=>d,aR:()=>p,xI:()=>r});var l=t(805454),n=t(467780),o=t(991224),i=t(425347);let s=({checkExperiment:e,requestContext:a})=>{let{group:t}=e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0});return{logStat:(e,l)=>(0,i.GV)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:t,browser:a?.userAgent.browserName,platform:a?.userAgent.platform,...l}})}},r=()=>{let e=(0,n._8)(),a=(0,o.qJ)(),{checkExperiment:t}=(0,l.A)(),i=e.isAuthenticated&&!a,r=u({checkExperiment:t,isAuthenticated:e.isAuthenticated,isDesktop:a});return i&&r.isPartOfExperiment?s({checkExperiment:t,requestContext:e}):{logStat:()=>{}}},_=0,d=({checkExperiment:e,isAuthMweb:a})=>{if(!a)return;let{logStat:t}=s({checkExperiment:e});(_+=1)<10&&t(`repin_${_}`)};function u({checkExperiment:e,isDesktop:a,isAuthenticated:t,skipActivation:l}){if(!t)return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1};if(a){let{anyEnabled:a}=e("auth_dweb_graphql_pin_page",l?{dangerouslySkipActivation:!0}:void 0);return{isGraphQLEnabledForRelatedPins:a,isGraphQLEnabledInGeneral:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}{let{anyEnabled:a,group:t}=e("auth_mweb_graphql_pin_page",l?{dangerouslySkipActivation:!0}:void 0);switch(t){case"control":return{isGraphQLEnabledInGeneral:!1,isGraphQLEnabledForRelatedPins:!1,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};case"enabled_prefetch_story_pin_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!0};case"enabled_prefetch_closeup_data":return{isGraphQLEnabledInGeneral:!0,isGraphQLEnabledForRelatedPins:!0,shouldPrefetchCloseupPreviewFragment:!0,isPartOfExperiment:!0,shouldPrefetchStoryPinFragment:!1};default:return{isGraphQLEnabledInGeneral:a,isGraphQLEnabledForRelatedPins:a,shouldPrefetchCloseupPreviewFragment:!1,isPartOfExperiment:!1,shouldPrefetchStoryPinFragment:!1}}}}function p(){let{checkExperiment:e}=(0,l.A)(),a=(0,o.qJ)(),{isAuthenticated:t}=(0,n._8)();return u({checkExperiment:e,isDesktop:a,isAuthenticated:t})}},80611(e,a,t){t.d(a,{F:()=>i,K:()=>o});var l=t(424054),n=t(425347);let o=()=>!1,i=e=>{(0,l.Nz)(e)&&!o()&&(0,n.GV)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/57664-475340e035168ac0.mjs.map